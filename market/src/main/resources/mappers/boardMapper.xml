<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

  
<mapper namespace="BoardDAO">
 


  	
   	<select id="boardList" resultType="board">
	<![CDATA[
	    select a.boardno, a.memberno, a.title, a.category,a.datetime,a.content,a.price, nvl((b.cnt),0)"cnt",d.imagename,e.address,f.wish
		from board a
		LEFT JOIN (SELECT boardno,COUNT(distinct(memberno))cnt FROM guest GROUP BY boardno ) b
		ON a.boardno = b.boardno
		LEFT JOIN image d
		ON a.boardno = d.boardno
		LEFT JOIN member e
		ON a.memberno = e.memberno
		LEFT JOIN (SELECT boardno,COUNT(memberno)wish FROM wish group by boardno) f
		ON a.boardno = f.boardno
		where d.imageindex = 1 and rownum < 10
		order by cnt desc NULLS LAST
     ]]>
    </select>
    
<!--     <select id="getCartListCount" resultType="int">
    	select count(*) from cart where memberNo=#{memberNo}
    </select> -->
  
 	
</mapper>